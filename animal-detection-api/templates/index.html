<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöú Enhanced Animal Detection System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'farm-green': '#22c55e',
                        'farm-brown': '#a3a3a3',
                        'alert-red': '#ef4444',
                        'alert-orange': '#f97316',
                        'alert-yellow': '#eab308'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-green-50 to-green-100 min-h-screen">
    
    <!-- Navigation Bar -->
    <nav class="bg-white shadow-lg border-b-4 border-farm-green">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-gray-900">üöú Farm Animal Detection</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/" class="bg-farm-green text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">Home</a>
                    <a href="/upload" class="text-gray-700 hover:text-farm-green px-3 py-2 rounded-md text-sm font-medium transition">Upload</a>
                    <a href="/live" class="text-gray-700 hover:text-farm-green px-3 py-2 rounded-md text-sm font-medium transition">Live Stream</a>
                    <a href="/results" class="text-gray-700 hover:text-farm-green px-3 py-2 rounded-md text-sm font-medium transition">Results</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="text-center">
            <h1 class="text-4xl font-bold text-gray-900 sm:text-5xl md:text-6xl">
                <span class="block">Smart Farm</span>
                <span class="block text-farm-green">Animal Detection</span>
            </h1>
            <p class="mt-3 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">
                Advanced AI-powered animal detection system for Indian farms. Monitor your crops 24/7 with YOLOv8 technology and instant email alerts.
            </p>
        </div>

        <!-- Feature Cards -->
        <div class="mt-16 grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
            
            <!-- Video Upload Feature -->
            <div class="bg-white overflow-hidden shadow-xl rounded-lg hover:shadow-2xl transition-shadow duration-300">
                <div class="p-6">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white text-2xl">
                                üìπ
                            </div>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-lg font-medium text-gray-900">Video Upload</h3>
                            <p class="text-gray-500">Process recorded videos</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="text-sm text-gray-600">
                            Upload farm surveillance videos and get detailed analysis with bounding boxes and animal identification.
                        </p>
                        <div class="mt-4">
                            <a href="/upload" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 transition">
                                Upload Video
                                <svg class="ml-2 -mr-1 w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Live Stream Feature -->
            <div class="bg-white overflow-hidden shadow-xl rounded-lg hover:shadow-2xl transition-shadow duration-300">
                <div class="p-6">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-red-500 text-white text-2xl">
                                üì°
                            </div>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-lg font-medium text-gray-900">Live Streaming</h3>
                            <p class="text-gray-500">Real-time CCTV monitoring</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="text-sm text-gray-600">
                            Connect to CCTV cameras via RTSP/HTTP streams for real-time animal detection and instant alerts.
                        </p>
                        <div class="mt-4">
                            <a href="/live" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 transition">
                                Start Live Stream
                                <svg class="ml-2 -mr-1 w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results & Analytics -->
            <div class="bg-white overflow-hidden shadow-xl rounded-lg hover:shadow-2xl transition-shadow duration-300">
                <div class="p-6">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="flex items-center justify-center h-12 w-12 rounded-md bg-farm-green text-white text-2xl">
                                üìä
                            </div>
                        </div>
                        <div class="ml-4">
                            <h3 class="text-lg font-medium text-gray-900">Results & Analytics</h3>
                            <p class="text-gray-500">Detection history</p>
                        </div>
                    </div>
                    <div class="mt-4">
                        <p class="text-sm text-gray-600">
                            View past detections, processed videos, and comprehensive analytics about animal activity on your farm.
                        </p>
                        <div class="mt-4">
                            <a href="/results" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-farm-green hover:bg-green-600 transition">
                                View Results
                                <svg class="ml-2 -mr-1 w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Supported Animals Section -->
        <div class="mt-16 bg-white rounded-lg shadow-xl p-8">
            <h2 class="text-3xl font-bold text-gray-900 text-center mb-8">üêæ Supported Animals</h2>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4" id="supportedAnimals">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <!-- System Status -->
        <div class="mt-16 bg-white rounded-lg shadow-xl p-8">
            <h2 class="text-3xl font-bold text-gray-900 text-center mb-8">‚ö° System Status</h2>
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-6" id="systemStatus">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <!-- Features List -->
        <div class="mt-16 bg-white rounded-lg shadow-xl p-8">
            <h2 class="text-3xl font-bold text-gray-900 text-center mb-8">‚ú® System Features</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">ü§ñ AI Detection</h3>
                    <ul class="space-y-2 text-gray-600">
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> YOLOv8 neural network</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> 12+ Indian farm animals</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> 60% confidence threshold</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Priority-based detection</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">üìß Alert System</h3>
                    <ul class="space-y-2 text-gray-600">
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Gmail integration</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Instant email alerts</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Detection frame attachments</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Rate limiting protection</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">üé• Video Processing</h3>
                    <ul class="space-y-2 text-gray-600">
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Multiple format support</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Bounding box visualization</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Processing progress tracking</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Output video generation</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold text-gray-900 mb-4">üì° Live Streaming</h3>
                    <ul class="space-y-2 text-gray-600">
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> RTSP/HTTP streams</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Real-time detection</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> CCTV camera support</li>
                        <li class="flex items-center"><span class="text-farm-green mr-2">‚úì</span> Web browser streaming</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <h3 class="text-lg font-medium">üöú Climate-Smart Agriculture Platform</h3>
                <p class="mt-2 text-gray-400">Enhanced Animal Detection System with AI Technology</p>
                <p class="mt-2 text-sm text-gray-500">Protecting crops with intelligent monitoring ‚Ä¢ Version 2.0</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Load supported animals on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadSupportedAnimals();
            loadSystemStatus();
        });

        async function loadSupportedAnimals() {
            try {
                const response = await fetch('/api/supported_animals');
                const data = await response.json();
                
                const container = document.getElementById('supportedAnimals');
                const animalEmojis = {
                    'elephant': 'üêò', 'cow': 'üêÑ', 'buffalo': 'üêÉ', 'goat': 'üêê',
                    'sheep': 'üêë', 'pig': 'üê∑', 'dog': 'üêï', 'cat': 'üê±',
                    'monkey': 'üêí', 'deer': 'ü¶å', 'wild_boar': 'üêó', 'nilgai': 'ü¶å',
                    'peacock': 'ü¶ö', 'bird': 'üê¶', 'bear': 'üêª', 'horse': 'üêé'
                };
                
                container.innerHTML = data.animals.map(animal => `
                    <div class="bg-gray-50 rounded-lg p-4 text-center hover:bg-gray-100 transition">
                        <div class="text-3xl mb-2">${animalEmojis[animal] || 'üêæ'}</div>
                        <div class="text-sm font-medium text-gray-900">${animal.replace('_', ' ').toUpperCase()}</div>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('Error loading supported animals:', error);
                document.getElementById('supportedAnimals').innerHTML = `
                    <div class="col-span-full text-center text-gray-500">
                        Unable to load supported animals
                    </div>
                `;
            }
        }

        async function loadSystemStatus() {
            try {
                const response = await fetch('/api/detection_statistics');
                const data = await response.json();
                
                const container = document.getElementById('systemStatus');
                container.innerHTML = `
                    <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-6 text-white text-center">
                        <div class="text-3xl font-bold">${data.total_videos || 0}</div>
                        <div class="text-sm opacity-90">Videos Processed</div>
                    </div>
                    <div class="bg-gradient-to-r from-farm-green to-green-600 rounded-lg p-6 text-white text-center">
                        <div class="text-3xl font-bold">${data.total_detections || 0}</div>
                        <div class="text-sm opacity-90">Animals Detected</div>
                    </div>
                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-6 text-white text-center">
                        <div class="text-3xl font-bold">${Object.keys(data.animal_counts || {}).length}</div>
                        <div class="text-sm opacity-90">Species Found</div>
                    </div>
                `;
                
            } catch (error) {
                console.error('Error loading system status:', error);
                document.getElementById('systemStatus').innerHTML = `
                    <div class="col-span-full text-center text-gray-500">
                        Unable to load system status
                    </div>
                `;
            }
        }

        // Auto-refresh status every 30 seconds
        setInterval(loadSystemStatus, 30000);
    </script>
</body>
</html>
